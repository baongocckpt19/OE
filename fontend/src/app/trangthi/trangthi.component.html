<div class="exam-container">
    <!-- PH·∫¶N TH√îNG TIN ƒê·ªÄ THI -->
    <section class="exam-info">
        <h2>{{ exam.examName }}</h2>
        <p><strong>M√¥n h·ªçc:</strong> {{ exam.subject }}</p>
        <p><strong>Th·ªùi gian l√†m b√†i:</strong> {{ exam.duration }} ph√∫t</p>
        <p><strong>M√¥ t·∫£:</strong> {{ exam.description }}</p>
    </section>

    <!-- ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c -->
    <div class="timer" [class.flashing]="isTimerFlashing">
        <span>‚è∞ Th·ªùi gian c√≤n l·∫°i:</span>
        <strong>{{ displayTime }}</strong>
    </div>
    <div class="warning-banner" *ngIf="showWarningBanner" >
        ‚è≥ C·∫£nh b√°o: Th·ªùi gian s·∫Øp h·∫øt! H√£y ki·ªÉm tra b√†i l√†m c·ªßa b·∫°n.
    </div>


    <div class="exam-layout">
        <!-- DANH S√ÅCH C√ÇU H·ªéI -->
        <div class="question-section">
            <div *ngFor="let q of questions; let i = index" class="question-block">

                <!-- C·ªú ƒê√ÅNH D·∫§U -->
                <div class="flag" [class.flagged]="flaggedQuestions[i]" (click)="toggleFlag(i)"
                    title="ƒê√°nh d·∫•u nghi ng·ªù">
                    üö©
                </div>

                <p><strong>C√¢u {{ i + 1 }}:</strong> {{ q.question }}</p>
                <div class="answer-grid">
                    <label *ngFor="let a of q.answers; let j = index" class="answer-option"
                        [class.selected]="selectedAnswers[i] === j" (click)="selectAnswer(i, j)">
                        <span class="label">{{ 'ABCD'[j] }}.</span>
                        <span class="text">{{ a }}</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- QUESTION NAV -->
        <div class="question-nav">
            <h4>C√¢u h·ªèi</h4>
            <div class="nav-grid">
                <div *ngFor="let q of questions; let i = index" class="nav-item"
                    [class.answered]="selectedAnswers[i] !== null" [class.flagged]="flaggedQuestions[i]"
                    (click)="scrollToQuestion(i)">
                    {{ i + 1 }}
                </div>
            </div>

            <!-- N√∫t n·ªôp b√†i -->
            <button class="submit-button" (click)="onSubmit()">N·ªôp b√†i</button>
        </div>

    </div>


    <!-- Modal hi·ªÉn th·ªã k·∫øt qu·∫£ -->
    <div class="result-modal" *ngIf="showResultModal">
        <div class="modal-content">
            <h2>üéâ K·∫øt qu·∫£ b√†i thi</h2>
            <p>ƒêi·ªÉm c·ªßa b·∫°n: <strong>{{ examScore }}</strong></p>
            <div class="modal-buttons">
                <button (click)="reviewExam()">Xem l·∫°i b√†i thi</button>
                <button (click)="exitExam()">Tho√°t</button>
            </div>
        </div>
    </div>

</div>